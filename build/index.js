var s=class r{constructor(){this.traces=[];}static empty(){return new r}add(t){let e=new r;return e.traces=[...this.traces,t],e}*[Symbol.iterator](){for(let t of this.traces)yield t;}};var a=class r{constructor(t,e){this.message=t,this.time=e;}static from(t,e){return new r(t,e)}read(){return this.message}at(){return this.time}};var l=class r{constructor(t){this.value=t;}static of(t){return new r(t)}bind(t){return t(this.value)}unwrap(){return this.value}map(t){let e=t(this.value);return r.of(e)}};var c=class r{static of(){return new r}bind(t){return this}unwrap(){throw new Error("Value of None cannot be unwrapped")}map(t){return this}};var i=class r{constructor(){this.contexts={};}static empty(){return new r}get(t){return this.contexts[t]?l.of(this.contexts[t]):c.of()}add(t,e){let o=new r;return o.contexts={...this.contexts},o.contexts[t]=e,o}remove(t){let e=new r;return e.contexts={...this.contexts},delete e.contexts[t],e}*[Symbol.iterator](){for(let t in this.contexts)yield this.contexts[t];}};var u=class r{constructor(t,e,o,m,n){this.message=t,this.name="Failure",this.code=e,this.traces=o,this.contexts=m,this.previous=n;}static dueTo(t,e,o,m,n,p){return n=n??s.empty(),m?n.add(m):n.add(a.from(t,Date.now())),p=p??i.empty(),new r(t,e,n,p,o||null)}bind(t){return this}map(t){return this}lift(t){return this}unwrap(){throw new Error("Value of Failure can not be unwrapped")}getTraces(){return this.traces}withTrace(t){return this.traces.add(t),this}withContext(t,e){return this.contexts.add(t,e),this}getContext(t){return this.contexts.get(t)}getContexts(){return this.contexts}clearContext(t){return this.contexts.remove(t),this}};var x=class r{constructor(t,e,o){this.value=t,this.traces=e,this.contexts=o;}static of(t,e,o){return new r(t,e??s.empty(),o??i.empty())}bind(t){return t(this.value)}lift(t){return new r(t,this.traces,this.contexts)}map(t){return new r(t(this.value),this.traces,this.contexts)}unwrap(){return this.value}getTraces(){return this.traces}withTrace(t){return this.traces.add(t),this}withContext(t,e){return this.contexts.add(t,e),this}getContext(t){return this.contexts.get(t)}getContexts(){return this.contexts}clearContext(t){return this.contexts.remove(t),this}};var h=class{};

export { h as Awaiting, i as ContextCollection, u as Failure, c as None, l as Some, x as Success, s as TraceCollection, a as TraceCommon };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tb25hZC90cmFjZS90cmFjZS1jb2xsZWN0aW9uLnRzIiwiLi4vc3JjL21vbmFkL3RyYWNlL3RyYWNlLWNvbW1vbi50cyIsIi4uL3NyYy9tb25hZC9tb25hZHMvb3B0aW9uYWwvc29tZS50cyIsIi4uL3NyYy9tb25hZC9tb25hZHMvb3B0aW9uYWwvbm9uZS50cyIsIi4uL3NyYy9tb25hZC9jb250ZXh0L2NvbnRleHQtY29sbGVjdGlvbi50cyIsIi4uL3NyYy9tb25hZC9tb25hZHMvZWl0aGVyL2ZhaWx1cmUudHMiLCIuLi9zcmMvbW9uYWQvbW9uYWRzL2VpdGhlci9zdWNjZXNzLnRzIiwiLi4vc3JjL21vbmFkL2F3YWl0aW5nLnRzIl0sIm5hbWVzIjpbIlRyYWNlQ29sbGVjdGlvbiIsIl9UcmFjZUNvbGxlY3Rpb24iLCJ0cmFjZSIsIm5ld0NvbGxlY3Rpb24iLCJUcmFjZUNvbW1vbiIsIl9UcmFjZUNvbW1vbiIsIm1lc3NhZ2UiLCJ0aW1lIiwiU29tZSIsIl9Tb21lIiwidmFsdWUiLCJmbiIsIm5ld1ZhbHVlIiwiTm9uZSIsIl9Ob25lIiwiQ29udGV4dENvbGxlY3Rpb24iLCJfQ29udGV4dENvbGxlY3Rpb24iLCJrZXkiLCJjb250ZXh0IiwiRmFpbHVyZSIsIl9GYWlsdXJlIiwiY29kZSIsInRyYWNlcyIsImNvbnRleHRzIiwicHJldmlvdXMiLCJTdWNjZXNzIiwiX1N1Y2Nlc3MiLCJBd2FpdGluZyJdLCJtYXBwaW5ncyI6IkFBSU8sSUFBTUEsRUFBTixNQUFNQyxDQUFrQyxDQUdyQyxhQUFjLENBRnRCLEtBQVUsT0FBa0IsQ0FBQyxDQUVOLENBRXZCLE9BQWMsT0FBeUIsQ0FDckMsT0FBTyxJQUFJQSxDQUNiLENBRU8sSUFBSUMsRUFBK0IsQ0FDeEMsSUFBTUMsRUFBZ0IsSUFBSUYsRUFDMUIsT0FBQUUsRUFBYyxPQUFTLENBQUMsR0FBRyxLQUFLLE9BQVFELENBQUssRUFDdENDLENBQ1QsQ0FFQSxFQUFTLE9BQU8sUUFBUSxHQUFxQixDQUMz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QUFJQSxDQUFLLEVBQ2QsSUFDVCxDQUVBLFlBQVllLEVBQWFDLEVBQTZCLENBQ3BELFlBQUssU0FBUyxJQUFJRCxFQUFLQyxDQUFPLEVBQ3ZCLElBQ1QsQ0FFQSxXQUFXRCxFQUFzQyxDQUMvQyxPQUFPLEtBQUssU0FBUyxJQUFJQSxDQUFHLENBQzlCLENBRUEsYUFBd0IsQ0FDdEIsT0FBTyxLQUFLLFFBQ2QsQ0FFQSxhQUFhQSxFQUF3QixDQUNuQyxZQUFLLFNBQVMsT0FBT0EsQ0FBRyxFQUNqQixJQUNULENBQ0YsRUN0RU8sSUFBTVUsRUFBTixLQUFlLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBsZW1lbnQgdGhlIFRyYWNlQ29sbGVjdGlvbiBjbGFzc1xuaW1wb3J0IHsgVHJhY2VzIH0gZnJvbSBcIkAvbW9uYWQvdHJhY2UvdHJhY2VzXCI7XG5pbXBvcnQgeyBUcmFjZSB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmFjZUNvbGxlY3Rpb24gaW1wbGVtZW50cyBUcmFjZXMge1xuICBwcm90ZWN0ZWQgdHJhY2VzOiBUcmFjZVtdID0gW107XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBlbXB0eSgpOiBUcmFjZUNvbGxlY3Rpb24ge1xuICAgIHJldHVybiBuZXcgVHJhY2VDb2xsZWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgYWRkKHRyYWNlOiBUcmFjZSk6IFRyYWNlQ29sbGVjdGlvbiB7XG4gICAgY29uc3QgbmV3Q29sbGVjdGlvbiA9IG5ldyBUcmFjZUNvbGxlY3Rpb24oKTtcbiAgICBuZXdDb2xsZWN0aW9uLnRyYWNlcyA9IFsuLi50aGlzLnRyYWNlcywgdHJhY2VdO1xuICAgIHJldHVybiBuZXdDb2xsZWN0aW9uO1xuICB9XG5cbiAgcHVibGljICpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYXRvcjxUcmFjZT4ge1xuICAgIGZvciAoY29uc3QgdHJhY2Ugb2YgdGhpcy50cmFjZXMpIHtcbiAgICAgIHlpZWxkIHRyYWNlO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gSW1wbGVtZW50IHRoZSBUcmFjZUNvbW1vbiBjbGFzc1xuaW1wb3J0IHsgVHJhY2UgfSBmcm9tIFwiQC9tb25hZC90cmFjZS90cmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgVHJhY2VDb21tb24gaW1wbGVtZW50cyBUcmFjZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWVzc2FnZTogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IHRpbWU6IG51bWJlcjtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgdGltZTogbnVtYmVyKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBmcm9tKG1lc3NhZ2U6IHN0cmluZywgdGltZTogbnVtYmVyKTogVHJhY2VDb21tb24ge1xuICAgIHJldHVybiBuZXcgVHJhY2VDb21tb24obWVzc2FnZSwgdGltZSk7XG4gIH1cblxuICBwdWJsaWMgcmVhZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gIH1cblxuICBwdWJsaWMgYXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50aW1lO1xuICB9XG59XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gXCJAL21vbmFkL29wdGlvbmFsXCI7XG5cbmV4cG9ydCBjbGFzcyBTb21lPFQ+IGltcGxlbWVudHMgT3B0aW9uYWw8VD4ge1xuICBwcml2YXRlIHJlYWRvbmx5IHZhbHVlOiBUO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IodmFsdWU6IFQpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBzdGF0aWMgb2Y8VD4odmFsdWU6IFQpOiBTb21lPFQ+IHtcbiAgICByZXR1cm4gbmV3IFNvbWUodmFsdWUpO1xuICB9XG5cbiAgYmluZDxVPihmbjogKHZhbHVlOiBUKSA9PiBPcHRpb25hbDxVPik6IE9wdGlvbmFsPFU+IHtcbiAgICByZXR1cm4gZm4odGhpcy52YWx1ZSk7XG4gIH1cblxuICB1bndyYXAoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICBtYXA8VT4oZm46ICh2YWx1ZTogVCkgPT4gVSk6IE9wdGlvbmFsPFU+IHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGZuKHRoaXMudmFsdWUpO1xuICAgIHJldHVybiBTb21lLm9mKG5ld1ZhbHVlKTtcbiAgfVxufVxuIiwiLy8gRGVmaW5lIHRoZSBOb25lIGNsYXNzIGltcGxlbWVudGluZyB0aGUgT3B0aW9uYWwgaW50ZXJmYWNlXG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gXCJAL21vbmFkL29wdGlvbmFsXCI7XG5cbmV4cG9ydCBjbGFzcyBOb25lIGltcGxlbWVudHMgT3B0aW9uYWw8bmV2ZXI+IHtcbiAgc3RhdGljIG9mKCk6IE5vbmUge1xuICAgIHJldHVybiBuZXcgTm9uZSgpO1xuICB9XG5cbiAgYmluZChmbjogKHZhbHVlOiBuZXZlcikgPT4gT3B0aW9uYWw8bmV2ZXI+KTogTm9uZSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB1bndyYXAoKTogbmV2ZXIge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlZhbHVlIG9mIE5vbmUgY2Fubm90IGJlIHVud3JhcHBlZFwiKTtcbiAgfVxuXG4gIG1hcDxVPihmbjogKHZhbHVlOiBuZXZlcikgPT4gVSk6IE5vbmUge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZXh0cyB9IGZyb20gXCJAL21vbmFkL2NvbnRleHQvY29udGV4dHNcIjtcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHRcIjtcbmltcG9ydCB7IE9wdGlvbmFsUmVzdWx0IH0gZnJvbSBcIkAvbW9uYWQvcmVzdWx0XCI7XG5pbXBvcnQgeyBTb21lIH0gZnJvbSBcIkAvbW9uYWQvbW9uYWRzL29wdGlvbmFsL3NvbWVcIjtcbmltcG9ydCB7IE5vbmUgfSBmcm9tIFwiQC9tb25hZC9tb25hZHMvb3B0aW9uYWwvbm9uZVwiO1xuXG5leHBvcnQgY2xhc3MgQ29udGV4dENvbGxlY3Rpb24gaW1wbGVtZW50cyBDb250ZXh0cyB7XG4gIHByaXZhdGUgY29udGV4dHM6IHsgW2tleTogc3RyaW5nXTogQ29udGV4dCB9ID0ge307XG5cbiAgc3RhdGljIGVtcHR5KCk6IENvbnRleHRDb2xsZWN0aW9uIHtcbiAgICByZXR1cm4gbmV3IENvbnRleHRDb2xsZWN0aW9uKCk7XG4gIH1cblxuICBnZXQoa2V5OiBzdHJpbmcpOiBPcHRpb25hbFJlc3VsdDxDb250ZXh0PiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dHNba2V5XSA/IFNvbWUub2YodGhpcy5jb250ZXh0c1trZXldKSA6IE5vbmUub2YoKTtcbiAgfVxuXG4gIGFkZChrZXk6IHN0cmluZywgY29udGV4dDogQ29udGV4dCk6IENvbnRleHRDb2xsZWN0aW9uIHtcbiAgICBjb25zdCBuZXdDb2xsZWN0aW9uID0gbmV3IENvbnRleHRDb2xsZWN0aW9uKCk7XG4gICAgbmV3Q29sbGVjdGlvbi5jb250ZXh0cyA9IHsgLi4udGhpcy5jb250ZXh0cyB9O1xuICAgIG5ld0NvbGxlY3Rpb24uY29udGV4dHNba2V5XSA9IGNvbnRleHQ7XG4gICAgcmV0dXJuIG5ld0NvbGxlY3Rpb247XG4gIH1cblxuICByZW1vdmUoa2V5OiBzdHJpbmcpOiBDb250ZXh0Q29sbGVjdGlvbiB7XG4gICAgY29uc3QgbmV3Q29sbGVjdGlvbiA9IG5ldyBDb250ZXh0Q29sbGVjdGlvbigpO1xuICAgIG5ld0NvbGxlY3Rpb24uY29udGV4dHMgPSB7IC4uLnRoaXMuY29udGV4dHMgfTtcbiAgICBkZWxldGUgbmV3Q29sbGVjdGlvbi5jb250ZXh0c1trZXldO1xuICAgIHJldHVybiBuZXdDb2xsZWN0aW9uO1xuICB9XG5cbiAgKltTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhdG9yPENvbnRleHQ+IHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNvbnRleHRzKSB7XG4gICAgICB5aWVsZCB0aGlzLmNvbnRleHRzW2tleV07XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBFaXRoZXIgfSBmcm9tIFwiQC9tb25hZC9laXRoZXJcIjtcbmltcG9ydCB7IE9wdGlvbmFsUmVzdWx0LCBSZXN1bHQgfSBmcm9tIFwiQC9tb25hZC9yZXN1bHRcIjtcbmltcG9ydCB7IFRyYWNlcyB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlc1wiO1xuaW1wb3J0IHsgVHJhY2UgfSBmcm9tIFwiQC9tb25hZC90cmFjZS90cmFjZVwiO1xuaW1wb3J0IHsgQ29udGV4dHMgfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHRzXCI7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSBcIkAvbW9uYWQvY29udGV4dC9jb250ZXh0XCI7XG5pbXBvcnQgeyBUcmFjZUNvbGxlY3Rpb24gfSBmcm9tIFwiQC9tb25hZC90cmFjZS90cmFjZS1jb2xsZWN0aW9uXCI7XG5pbXBvcnQgeyBUcmFjZUNvbW1vbiB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlLWNvbW1vblwiO1xuaW1wb3J0IHsgQ29udGV4dENvbGxlY3Rpb24gfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHQtY29sbGVjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRmFpbHVyZSBpbXBsZW1lbnRzIEVpdGhlcjxuZXZlcj4sIEVycm9yIHtcbiAgcHJpdmF0ZSByZWFkb25seSB0cmFjZXM6IFRyYWNlcztcbiAgcHJpdmF0ZSByZWFkb25seSBjb250ZXh0czogQ29udGV4dHM7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY29kZTogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHByZXZpb3VzOiBFcnJvciB8IG51bGw7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgY29kZTogc3RyaW5nLFxuICAgIHRyYWNlczogVHJhY2VzLFxuICAgIGNvbnRleHRzOiBDb250ZXh0cyxcbiAgICBwcmV2aW91czogRXJyb3IgfCBudWxsLFxuICApIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMubmFtZSA9IFwiRmFpbHVyZVwiO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgdGhpcy50cmFjZXMgPSB0cmFjZXM7XG4gICAgdGhpcy5jb250ZXh0cyA9IGNvbnRleHRzO1xuICAgIHRoaXMucHJldmlvdXMgPSBwcmV2aW91cztcbiAgfVxuXG4gIHN0YXRpYyBkdWVUbyhcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgY29kZTogc3RyaW5nLFxuICAgIHByZXZpb3VzPzogRXJyb3IgfCBudWxsLFxuICAgIHRyYWNlPzogVHJhY2UgfCBudWxsLFxuICAgIHRyYWNlcz86IFRyYWNlcyB8IG51bGwsXG4gICAgY29udGV4dHM/OiBDb250ZXh0cyB8IG51bGwsXG4gICk6IEZhaWx1cmUge1xuICAgIC8vIEFkZCBGYWlsdXJlIHRyYWNlcyBhcyBsYXN0IGl0ZW0uXG4gICAgdHJhY2VzID0gdHJhY2VzID8/IFRyYWNlQ29sbGVjdGlvbi5lbXB0eSgpO1xuICAgIGlmICh0cmFjZSkge1xuICAgICAgdHJhY2VzLmFkZCh0cmFjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGEgY29tbW9uIHRyYWNlIG9mIHRoZSBtZXNzYWdlIHdoZW4gbm8gc3BlY2lmaWMgdHJhY2Ugd2FzIHByb3ZpZGVkLlxuICAgICAgdHJhY2VzLmFkZChUcmFjZUNvbW1vbi5mcm9tKG1lc3NhZ2UsIERhdGUubm93KCkpKTtcbiAgICB9XG5cbiAgICBjb250ZXh0cyA9IGNvbnRleHRzID8/IENvbnRleHRDb2xsZWN0aW9uLmVtcHR5KCk7XG4gICAgcmV0dXJuIG5ldyBGYWlsdXJlKFxuICAgICAgbWVzc2FnZSxcbiAgICAgIGNvZGUsXG4gICAgICB0cmFjZXMsXG4gICAgICBjb250ZXh0cyxcbiAgICAgIHByZXZpb3VzID8gcHJldmlvdXMgOiBudWxsLFxuICAgICk7XG4gIH1cblxuICBiaW5kKGZuOiAodmFsdWU6IG5ldmVyKSA9PiBSZXN1bHQ8bmV2ZXI+KTogUmVzdWx0PG5ldmVyPiB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBtYXAoZm46ICh2YWx1ZTogbmV2ZXIpID0+IG5ldmVyKTogUmVzdWx0PG5ldmVyPiB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaWZ0KHZhbHVlOiBuZXZlcik6IFJlc3VsdDxuZXZlcj4ge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdW53cmFwKCk6IG5ldmVyIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBvZiBGYWlsdXJlIGNhbiBub3QgYmUgdW53cmFwcGVkXCIpO1xuICB9XG5cbiAgZ2V0VHJhY2VzKCk6IFRyYWNlcyB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2VzO1xuICB9XG5cbiAgd2l0aFRyYWNlKHRyYWNlOiBUcmFjZSk6IFJlc3VsdDxuZXZlcj4ge1xuICAgIHRoaXMudHJhY2VzLmFkZCh0cmFjZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB3aXRoQ29udGV4dChrZXk6IHN0cmluZywgY29udGV4dDogQ29udGV4dCk6IFJlc3VsdDxuZXZlcj4ge1xuICAgIHRoaXMuY29udGV4dHMuYWRkKGtleSwgY29udGV4dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRDb250ZXh0KGtleTogc3RyaW5nKTogT3B0aW9uYWxSZXN1bHQ8Q29udGV4dD4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzLmdldChrZXkpO1xuICB9XG5cbiAgZ2V0Q29udGV4dHMoKTogQ29udGV4dHMge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzO1xuICB9XG5cbiAgY2xlYXJDb250ZXh0KGtleTogc3RyaW5nKTogUmVzdWx0PG5ldmVyPiB7XG4gICAgdGhpcy5jb250ZXh0cy5yZW1vdmUoa2V5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuIiwiaW1wb3J0IHsgRWl0aGVyIH0gZnJvbSBcIkAvbW9uYWQvZWl0aGVyXCI7XG5pbXBvcnQgeyBPcHRpb25hbFJlc3VsdCwgUmVzdWx0IH0gZnJvbSBcIkAvbW9uYWQvcmVzdWx0XCI7XG5pbXBvcnQgeyBDb250ZXh0cyB9IGZyb20gXCJAL21vbmFkL2NvbnRleHQvY29udGV4dHNcIjtcbmltcG9ydCB7IFRyYWNlcyB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlc1wiO1xuaW1wb3J0IHsgVHJhY2UgfSBmcm9tIFwiQC9tb25hZC90cmFjZS90cmFjZVwiO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gXCJAL21vbmFkL2NvbnRleHQvY29udGV4dFwiO1xuaW1wb3J0IHsgVHJhY2VDb2xsZWN0aW9uIH0gZnJvbSBcIkAvbW9uYWQvdHJhY2UvdHJhY2UtY29sbGVjdGlvblwiO1xuaW1wb3J0IHsgQ29udGV4dENvbGxlY3Rpb24gfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHQtY29sbGVjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgU3VjY2VzczxUPiBpbXBsZW1lbnRzIEVpdGhlcjxUPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgdmFsdWU6IFQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgdHJhY2VzOiBUcmFjZXM7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29udGV4dHM6IENvbnRleHRzO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IodmFsdWU6IFQsIHRyYWNlczogVHJhY2VzLCBjb250ZXh0czogQ29udGV4dHMpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy50cmFjZXMgPSB0cmFjZXM7XG4gICAgdGhpcy5jb250ZXh0cyA9IGNvbnRleHRzO1xuICB9XG5cbiAgc3RhdGljIG9mKHZhbHVlOiBhbnksIHRyYWNlcz86IFRyYWNlcyB8IG51bGwsIGNvbnRleHRzPzogQ29udGV4dHMgfCBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBTdWNjZXNzKFxuICAgICAgdmFsdWUsXG4gICAgICB0cmFjZXMgPz8gVHJhY2VDb2xsZWN0aW9uLmVtcHR5KCksXG4gICAgICBjb250ZXh0cyA/PyBDb250ZXh0Q29sbGVjdGlvbi5lbXB0eSgpLFxuICAgICk7XG4gIH1cblxuICBiaW5kKGZuOiAodmFsdWU6IFQpID0+IFJlc3VsdDxUPik6IFJlc3VsdDxUPiB7XG4gICAgcmV0dXJuIGZuKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgbGlmdCh2YWx1ZTogYW55KTogUmVzdWx0PFQ+IHtcbiAgICByZXR1cm4gbmV3IFN1Y2Nlc3ModmFsdWUsIHRoaXMudHJhY2VzLCB0aGlzLmNvbnRleHRzKTtcbiAgfVxuXG4gIG1hcChmbjogKHZhbHVlOiBhbnkpID0+IGFueSk6IFJlc3VsdDxUPiB7XG4gICAgcmV0dXJuIG5ldyBTdWNjZXNzKGZuKHRoaXMudmFsdWUpLCB0aGlzLnRyYWNlcywgdGhpcy5jb250ZXh0cyk7XG4gIH1cblxuICB1bndyYXAoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICBnZXRUcmFjZXMoKTogVHJhY2VzIHtcbiAgICByZXR1cm4gdGhpcy50cmFjZXM7XG4gIH1cblxuICB3aXRoVHJhY2UodHJhY2U6IFRyYWNlKTogUmVzdWx0PFQ+IHtcbiAgICB0aGlzLnRyYWNlcy5hZGQodHJhY2UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aENvbnRleHQoa2V5OiBzdHJpbmcsIGNvbnRleHQ6IENvbnRleHQpOiBSZXN1bHQ8VD4ge1xuICAgIHRoaXMuY29udGV4dHMuYWRkKGtleSwgY29udGV4dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRDb250ZXh0KGtleTogc3RyaW5nKTogT3B0aW9uYWxSZXN1bHQ8Q29udGV4dD4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzLmdldChrZXkpO1xuICB9XG5cbiAgZ2V0Q29udGV4dHMoKTogQ29udGV4dHMge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzO1xuICB9XG5cbiAgY2xlYXJDb250ZXh0KGtleTogc3RyaW5nKTogUmVzdWx0PFQ+IHtcbiAgICB0aGlzLmNvbnRleHRzLnJlbW92ZShrZXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXdhaXRpbmcge31cbiJdfQ==