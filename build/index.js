'use strict';var react=require('react'),B=require('fast-deep-equal'),jsxRuntime=require('react/jsx-runtime');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var B__default=/*#__PURE__*/_interopDefault(B);var l=class e{constructor(){this.traces=[];}static empty(){return new e}add(t){let r=new e;return r.traces=[...this.traces,t],r}*[Symbol.iterator](){for(let t of this.traces)yield t;}};var p=class e{constructor(t,r){this.message=t,this.time=r;}static from(t,r){return new e(t,r)}read(){return this.message}at(){return this.time}};var g=Symbol("JsMonadSomeSymbol"),C,f=class e{constructor(t){this[C]=true;this.value=t;}static[(C=g,Symbol.hasInstance)](t){return S(t)}static of(t){return new e(t)}bind(t){return t(this.value)}unwrap(){return this.value}map(t){let r=t(this.value);return e.of(r)}};function S(e){return e&&e[g]===true}var b=Symbol("JsMonadNoneSymbol"),w,x=class e{constructor(){this[w]=true;}static[(w=b,Symbol.hasInstance)](t){return A(t)}static of(){return new e}bind(t){return this}unwrap(){throw new Error("Value of None cannot be unwrapped")}map(t){return this}};function A(e){return e&&e[b]===true}var u=class e{constructor(){this.contexts={};}static empty(){return new e}get(t){return this.contexts[t]?f.of(this.contexts[t]):x.of()}add(t,r){let o=new e;return o.contexts={...this.contexts},o.contexts[t]=r,o}remove(t){let r=new e;return r.contexts={...this.contexts},delete r.contexts[t],r}*[Symbol.iterator](){for(let t in this.contexts)yield this.contexts[t];}};var F=Symbol("JsMonadFailureSymbol"),O,a=class e{constructor(t,r,o,s,n){this[O]=true;this.message=t,this.name="Failure",this.code=r,this.traces=o,this.contexts=s,this.previous=n;}static[(O=F,Symbol.hasInstance)](t){return E(t)}static dueTo(t,r,o,s,n,c){return n=n??l.empty(),s?n.add(s):n.add(p.from(t,Date.now())),c=c??u.empty(),new e(t,r,n,c,o||null)}bind(t){return this}map(t){return this}lift(t){return this}unwrap(){throw new Error("Value of Failure can not be unwrapped")}getTraces(){return this.traces}withTrace(t){return this.traces.add(t),this}withContext(t,r){return this.contexts.add(t,r),this}getContext(t){return this.contexts.get(t)}getContexts(){return this.contexts}clearContext(t){return this.contexts.remove(t),this}};function E(e){return e&&e[F]===true}var I=Symbol("JsMonadSuccessSymbol"),N,i=class e{constructor(t,r,o){this[N]=true;this.value=t,this.traces=r,this.contexts=o;}static[(N=I,Symbol.hasInstance)](t){return U(t)}static of(t,r,o){return new e(t,r??l.empty(),o??u.empty())}bind(t){return t(this.value)}lift(t){return new e(t,this.traces,this.contexts)}map(t){return new e(t(this.value),this.traces,this.contexts)}unwrap(){return this.value}getTraces(){return this.traces}withTrace(t){return this.traces.add(t),this}withContext(t,r){return this.contexts.add(t,r),this}getContext(t){return this.contexts.get(t)}getContexts(){return this.contexts}clearContext(t){return this.contexts.remove(t),this}};function U(e){return e&&e[I]===true}var M=Symbol("JsMonadAwaitingSymbol"),J;J=M;var m=class{constructor(){this[J]=true;}};function q(e){return e&&e[M]===true}function V(e,{onSuccess:t,onFailure:r}){let o=react.useRef(new m);react.useEffect(()=>{let s=o.current,n=s instanceof m&&(e instanceof i||e instanceof a)||s instanceof i&&e instanceof a||s instanceof a&&e instanceof i,c=e instanceof i&&s instanceof i&&!B__default.default(s.unwrap(),e.unwrap());(n||c)&&(e instanceof i&&t&&t(e),e instanceof a&&r&&r(e)),o.current=e;},[e,t,r]);}var k=V;function G(e){let{asyncResult:t,onAwaiting:r,onFailure:o,onSuccess:s}=e,[n,c]=react.useState(null),[d,D]=react.useState(false),[P,v]=react.useState(true);if(k(t,{onSuccess:T=>{c(T),v(false);},onFailure:T=>{D(T),v(false);}}),P||!n)return jsxRuntime.jsx(jsxRuntime.Fragment,{children:r()});if(d)return jsxRuntime.jsx(jsxRuntime.Fragment,{children:o(d)});if(n)return jsxRuntime.jsx(jsxRuntime.Fragment,{children:s(n)})}exports.AsyncResultSuspense=G;exports.Awaiting=m;exports.ContextCollection=u;exports.Failure=a;exports.None=x;exports.Some=f;exports.Success=i;exports.TraceCollection=l;exports.TraceCommon=p;exports.isAwaiting=q;exports.isFailure=E;exports.isNone=A;exports.isSome=S;exports.isSuccess=U;exports.useEffectAsyncResult=V;//# sourceMappingURL=index.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tb25hZC90cmFjZS90cmFjZS1jb2xsZWN0aW9uLnRzIiwiLi4vc3JjL21vbmFkL3RyYWNlL3RyYWNlLWNvbW1vbi50cyIsIi4uL3NyYy9tb25hZC9tb25hZHMvb3B0aW9uYWwvc29tZS50cyIsIi4uL3NyYy9tb25hZC9tb25hZHMvb3B0aW9uYWwvbm9uZS50cyIsIi4uL3NyYy9tb25hZC9jb250ZXh0L2NvbnRleHQtY29sbGVjdGlvbi50cyIsIi4uL3NyYy9tb25hZC9tb25hZHMvZWl0aGVyL2ZhaWx1cmUudHMiLCIuLi9zcmMvbW9uYWQvbW9uYWRzL2VpdGhlci9zdWNjZXNzLnRzIiwiLi4vc3JjL21vbmFkL2F3YWl0aW5nLnRzIiwiLi4vc3JjL21vbmFkL2hvb2tzL3VzZS1lZmZlY3QtYXN5bmMtcmVzdWx0LnRzeCIsIi4uL3NyYy9tb25hZC9jb21wb25lbnRzL2FzeW5jLXJlc3VsdC1zdXNwZW5zZS50c3giXSwibmFtZXMiOlsiVHJhY2VDb2xsZWN0aW9uIiwiX1RyYWNlQ29sbGVjdGlvbiIsInRyYWNlIiwibmV3Q29sbGVjdGlvbiIsIlRyYWNlQ29tbW9uIiwiX1RyYWNlQ29tbW9uIiwibWVzc2FnZSIsInRpbWUiLCJTb21lU3ltYm9sIiwiX2EiLCJTb21lIiwiX1NvbWUiLCJ2YWx1ZSIsIm9iaiIsImlzU29tZSIsImZuIiwibmV3VmFsdWUiLCJOb25lU3ltYm9sIiwiTm9uZSIsIl9Ob25lIiwiaXNOb25lIiwiQ29udGV4dENvbGxlY3Rpb24iLCJfQ29udGV4dENvbGxlY3Rpb24iLCJrZXkiLCJjb250ZXh0IiwiRmFpbHVyZVN5bWJvbCIsIkZhaWx1cmUiLCJfRmFpbHVyZSIsImNvZGUiLCJ0cmFjZXMiLCJjb250ZXh0cyIsInByZXZpb3VzIiwiaXNGYWlsdXJlIiwiU3VjY2Vzc1N5bWJvbCIsIlN1Y2Nlc3MiLCJfU3VjY2VzcyIsImlzU3VjY2VzcyIsIkF3YWl0aW5nU3ltYm9sIiwiQXdhaXRpbmciLCJpc0F3YWl0aW5nIiwidXNlRWZmZWN0QXN5bmNSZXN1bHQiLCJyZXN1bHQiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJwcmV2aW91c1JlZiIsInVzZVJlZiIsInVzZUVmZmVjdCIsImhhc1N0YXR1c0NoYW5nZWQiLCJoYXNWYWx1ZUNoYW5nZWQiLCJpc0VxdWFsIiwidXNlX2VmZmVjdF9hc3luY19yZXN1bHRfZGVmYXVsdCIsIkFzeW5jUmVzdWx0U3VzcGVuc2UiLCJwcm9wcyIsImFzeW5jUmVzdWx0Iiwib25Bd2FpdGluZyIsImRhdGEiLCJzZXREYXRhIiwidXNlU3RhdGUiLCJlcnJvciIsInNldEVycm9yIiwibG9hZGluZyIsInNldExvYWRpbmciLCJqc3giLCJGcmFnbWVudCJdLCJtYXBwaW5ncyI6IjZOQUlhQSxJQUFBQSxDQUFBQSxDQUFOLE1BQU1DLENBQWtDLENBR3JDLFdBQUEsRUFBYyxDQUZ0QixJQUFVLENBQUEsTUFBQSxDQUFrQixHQUVMLENBRXZCLE9BQWMsT0FBeUIsQ0FDckMsT0FBTyxJQUFJQSxDQUNiLENBRU8sR0FBQSxDQUFJQyxFQUErQixDQUN4QyxJQUFNQyxDQUFnQixDQUFBLElBQUlGLENBQzFCLENBQUEsT0FBQUUsRUFBYyxNQUFTLENBQUEsQ0FBQyxHQUFHLElBQUEsQ0FBSyxNQUFRRCxDQUFBQSxDQUFLLEVBQ3RDQyxDQUNULENBRUEsRUFBUyxNQUFBLENBQU8sUUFBUSxDQUFBLEVBQXFCLENBQzNDLElBQVdELElBQUFBLENBQUFBLElBQVMsSUFBSyxDQUFBLE1BQUEsQ0FDdkIsTUFBTUEsRUFFVixDQUNGLEVDckJhRSxJQUFBQSxDQUFBQSxDQUFOLE1BQU1DLENBQTZCLENBSWhDLFdBQUEsQ0FBWUMsRUFBaUJDLENBQWMsQ0FBQSxDQUNqRCxJQUFLLENBQUEsT0FBQSxDQUFVRCxDQUNmLENBQUEsSUFBQSxDQUFLLEtBQU9DLEVBQ2QsQ0FFQSxPQUFjLElBQUEsQ0FBS0QsQ0FBaUJDLENBQUFBLENBQUFBLENBQTJCLENBQzdELE9BQU8sSUFBSUYsQ0FBWUMsQ0FBQUEsQ0FBQUEsQ0FBU0MsQ0FBSSxD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QUEsQ0FBQUEsQ0FBWSxVQUFBWCxDQUFXLENBQUEsU0FBQSxDQUFBRCxDQUFVLENBQUEsQ0FBSVUsQ0FFcEQsQ0FBQSxDQUFDRyxFQUFNQyxDQUFPLENBQUEsQ0FBSUMsY0FBNEIsQ0FBQSxJQUFJLENBQ2xELENBQUEsQ0FBQ0MsRUFBT0MsQ0FBUSxDQUFBLENBQUlGLGNBQTBCLENBQUEsS0FBSyxDQUNuRCxDQUFBLENBQUNHLENBQVNDLENBQUFBLENBQVUsQ0FBSUosQ0FBQUEsY0FBQUEsQ0FBa0IsSUFBSSxDQUFBLENBYXBELEdBWEFQLENBQUFBLENBQXdCRyxFQUFhLENBQ25DLFNBQUEsQ0FBWUUsQ0FBUyxFQUFBLENBQ25CQyxDQUFRRCxDQUFBQSxDQUFJLEVBQ1pNLENBQVcsQ0FBQSxLQUFLLEVBQ2xCLENBQUEsQ0FDQSxTQUFZSCxDQUFBQSxDQUFBQSxFQUFVLENBQ3BCQyxDQUFTRCxDQUFBQSxDQUFLLENBQ2RHLENBQUFBLENBQUFBLENBQVcsS0FBSyxFQUNsQixDQUNGLENBQUMsQ0FFR0QsQ0FBQUEsQ0FBQUEsRUFBVyxDQUFDTCxDQUFBQSxDQUNkLE9BQU9PLGNBQUFBLENBQUFDLG9CQUFBLENBQUcsUUFBQSxDQUFBVCxDQUFXLEVBQUEsQ0FBRSxDQUd6QixDQUFBLEdBQUlJLEVBQ0YsT0FBT0ksY0FBQUEsQ0FBQUMsbUJBQUEsQ0FBQSxDQUFHLFFBQUFwQixDQUFBQSxDQUFBQSxDQUFVZSxDQUFLLENBQUUsQ0FBQSxDQUFBLENBRzdCLEdBQUlILENBQUFBLENBQ0YsT0FBT08sY0FBQUEsQ0FBQUMsbUJBQUEsQ0FBQSxDQUFHLFFBQUFyQixDQUFBQSxDQUFBQSxDQUFVYSxDQUFJLENBQUEsQ0FBRSxDQUU5QiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEltcGxlbWVudCB0aGUgVHJhY2VDb2xsZWN0aW9uIGNsYXNzXG5pbXBvcnQgeyBUcmFjZXMgfSBmcm9tIFwiQC9tb25hZC90cmFjZS90cmFjZXNcIjtcbmltcG9ydCB7IFRyYWNlIH0gZnJvbSBcIkAvbW9uYWQvdHJhY2UvdHJhY2VcIjtcblxuZXhwb3J0IGNsYXNzIFRyYWNlQ29sbGVjdGlvbiBpbXBsZW1lbnRzIFRyYWNlcyB7XG4gIHByb3RlY3RlZCB0cmFjZXM6IFRyYWNlW10gPSBbXTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICBwdWJsaWMgc3RhdGljIGVtcHR5KCk6IFRyYWNlQ29sbGVjdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBUcmFjZUNvbGxlY3Rpb24oKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGQodHJhY2U6IFRyYWNlKTogVHJhY2VDb2xsZWN0aW9uIHtcbiAgICBjb25zdCBuZXdDb2xsZWN0aW9uID0gbmV3IFRyYWNlQ29sbGVjdGlvbigpO1xuICAgIG5ld0NvbGxlY3Rpb24udHJhY2VzID0gWy4uLnRoaXMudHJhY2VzLCB0cmFjZV07XG4gICAgcmV0dXJuIG5ld0NvbGxlY3Rpb247XG4gIH1cblxuICBwdWJsaWMgKltTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhdG9yPFRyYWNlPiB7XG4gICAgZm9yIChjb25zdCB0cmFjZSBvZiB0aGlzLnRyYWNlcykge1xuICAgICAgeWllbGQgdHJhY2U7XG4gICAgfVxuICB9XG59XG4iLCIvLyBJbXBsZW1lbnQgdGhlIFRyYWNlQ29tbW9uIGNsYXNzXG5pbXBvcnQgeyBUcmFjZSB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmFjZUNvbW1vbiBpbXBsZW1lbnRzIFRyYWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBtZXNzYWdlOiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGltZTogbnVtYmVyO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCB0aW1lOiBudW1iZXIpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMudGltZSA9IHRpbWU7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGZyb20obWVzc2FnZTogc3RyaW5nLCB0aW1lOiBudW1iZXIpOiBUcmFjZUNvbW1vbiB7XG4gICAgcmV0dXJuIG5ldyBUcmFjZUNvbW1vbihtZXNzYWdlLCB0aW1lKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgfVxuXG4gIHB1YmxpYyBhdCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnRpbWU7XG4gIH1cbn1cbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSBcIkAvbW9uYWQvb3B0aW9uYWxcIjtcbmltcG9ydCB7IEFzeW5jT3B0aW9uYWxSZXN1bHQsIE9wdGlvbmFsUmVzdWx0IH0gZnJvbSBcIkAvbW9uYWQvcmVzdWx0XCI7XG5pbXBvcnQgeyBpc05vbmUsIE5vbmUgfSBmcm9tIFwiQC9tb25hZC9tb25hZHMvb3B0aW9uYWwvbm9uZVwiO1xuXG5jb25zdCBTb21lU3ltYm9sID0gU3ltYm9sKFwiSnNNb25hZFNvbWVTeW1ib2xcIik7XG5cbmV4cG9ydCBjbGFzcyBTb21lPFQ+IGltcGxlbWVudHMgT3B0aW9uYWw8VD4ge1xuICBwcml2YXRlIHJlYWRvbmx5IHZhbHVlOiBUO1xuXG4gIFtTb21lU3ltYm9sXSA9IHRydWU7XG5cbiAgc3RhdGljIFtTeW1ib2wuaGFzSW5zdGFuY2VdKG9iajogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzU29tZShvYmopO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcih2YWx1ZTogVCkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIHN0YXRpYyBvZjxUPih2YWx1ZTogVCk6IFNvbWU8VD4ge1xuICAgIHJldHVybiBuZXcgU29tZSh2YWx1ZSk7XG4gIH1cblxuICBiaW5kPFU+KGZuOiAodmFsdWU6IFQpID0+IE9wdGlvbmFsPFU+KTogT3B0aW9uYWw8VT4ge1xuICAgIHJldHVybiBmbih0aGlzLnZhbHVlKTtcbiAgfVxuXG4gIHVud3JhcCgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIG1hcDxVPihmbjogKHZhbHVlOiBUKSA9PiBVKTogT3B0aW9uYWw8VT4ge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gZm4odGhpcy52YWx1ZSk7XG4gICAgcmV0dXJuIFNvbWUub2YobmV3VmFsdWUpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NvbWU8VD4oXG4gIG9iajogT3B0aW9uYWxSZXN1bHQ8YW55PiB8IEFzeW5jT3B0aW9uYWxSZXN1bHQ8YW55Pixcbik6IG9iaiBpcyBTb21lPFQ+IHtcbiAgcmV0dXJuIG9iaiAmJiAob2JqIGFzIFNvbWU8VD4pW1NvbWVTeW1ib2xdID09PSB0cnVlO1xufVxuIiwiLy8gRGVmaW5lIHRoZSBOb25lIGNsYXNzIGltcGxlbWVudGluZyB0aGUgT3B0aW9uYWwgaW50ZXJmYWNlXG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gXCJAL21vbmFkL29wdGlvbmFsXCI7XG5pbXBvcnQgeyBBc3luY09wdGlvbmFsUmVzdWx0LCBPcHRpb25hbFJlc3VsdCB9IGZyb20gXCJAL21vbmFkL3Jlc3VsdFwiO1xuaW1wb3J0IHsgaXNGYWlsdXJlIH0gZnJvbSBcIkAvbW9uYWQvbW9uYWRzL2VpdGhlci9mYWlsdXJlXCI7XG5cbmNvbnN0IE5vbmVTeW1ib2wgPSBTeW1ib2woXCJKc01vbmFkTm9uZVN5bWJvbFwiKTtcblxuZXhwb3J0IGNsYXNzIE5vbmUgaW1wbGVtZW50cyBPcHRpb25hbDxuZXZlcj4ge1xuICBbTm9uZVN5bWJvbF0gPSB0cnVlO1xuXG4gIHN0YXRpYyBbU3ltYm9sLmhhc0luc3RhbmNlXShvYmo6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc05vbmUob2JqKTtcbiAgfVxuXG4gIHN0YXRpYyBvZigpOiBOb25lIHtcbiAgICByZXR1cm4gbmV3IE5vbmUoKTtcbiAgfVxuXG4gIGJpbmQoZm46ICh2YWx1ZTogbmV2ZXIpID0+IE9wdGlvbmFsPG5ldmVyPik6IE5vbmUge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdW53cmFwKCk6IG5ldmVyIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBvZiBOb25lIGNhbm5vdCBiZSB1bndyYXBwZWRcIik7XG4gIH1cblxuICBtYXA8VT4oZm46ICh2YWx1ZTogbmV2ZXIpID0+IFUpOiBOb25lIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb25lPFQ+KFxuICBvYmo6IE9wdGlvbmFsUmVzdWx0PFQ+IHwgQXN5bmNPcHRpb25hbFJlc3VsdDxUPixcbik6IG9iaiBpcyBOb25lIHtcbiAgcmV0dXJuIG9iaiAmJiAob2JqIGFzIE5vbmUpW05vbmVTeW1ib2xdID09PSB0cnVlO1xufVxuIiwiaW1wb3J0IHsgQ29udGV4dHMgfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHRzXCI7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSBcIkAvbW9uYWQvY29udGV4dC9jb250ZXh0XCI7XG5pbXBvcnQgeyBPcHRpb25hbFJlc3VsdCB9IGZyb20gXCJAL21vbmFkL3Jlc3VsdFwiO1xuaW1wb3J0IHsgU29tZSB9IGZyb20gXCJAL21vbmFkL21vbmFkcy9vcHRpb25hbC9zb21lXCI7XG5pbXBvcnQgeyBOb25lIH0gZnJvbSBcIkAvbW9uYWQvbW9uYWRzL29wdGlvbmFsL25vbmVcIjtcblxuZXhwb3J0IGNsYXNzIENvbnRleHRDb2xsZWN0aW9uIGltcGxlbWVudHMgQ29udGV4dHMge1xuICBwcml2YXRlIGNvbnRleHRzOiB7IFtrZXk6IHN0cmluZ106IENvbnRleHQgfSA9IHt9O1xuXG4gIHN0YXRpYyBlbXB0eSgpOiBDb250ZXh0Q29sbGVjdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBDb250ZXh0Q29sbGVjdGlvbigpO1xuICB9XG5cbiAgZ2V0KGtleTogc3RyaW5nKTogT3B0aW9uYWxSZXN1bHQ8Q29udGV4dD4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzW2tleV0gPyBTb21lLm9mKHRoaXMuY29udGV4dHNba2V5XSkgOiBOb25lLm9mKCk7XG4gIH1cblxuICBhZGQoa2V5OiBzdHJpbmcsIGNvbnRleHQ6IENvbnRleHQpOiBDb250ZXh0Q29sbGVjdGlvbiB7XG4gICAgY29uc3QgbmV3Q29sbGVjdGlvbiA9IG5ldyBDb250ZXh0Q29sbGVjdGlvbigpO1xuICAgIG5ld0NvbGxlY3Rpb24uY29udGV4dHMgPSB7IC4uLnRoaXMuY29udGV4dHMgfTtcbiAgICBuZXdDb2xsZWN0aW9uLmNvbnRleHRzW2tleV0gPSBjb250ZXh0O1xuICAgIHJldHVybiBuZXdDb2xsZWN0aW9uO1xuICB9XG5cbiAgcmVtb3ZlKGtleTogc3RyaW5nKTogQ29udGV4dENvbGxlY3Rpb24ge1xuICAgIGNvbnN0IG5ld0NvbGxlY3Rpb24gPSBuZXcgQ29udGV4dENvbGxlY3Rpb24oKTtcbiAgICBuZXdDb2xsZWN0aW9uLmNvbnRleHRzID0geyAuLi50aGlzLmNvbnRleHRzIH07XG4gICAgZGVsZXRlIG5ld0NvbGxlY3Rpb24uY29udGV4dHNba2V5XTtcbiAgICByZXR1cm4gbmV3Q29sbGVjdGlvbjtcbiAgfVxuXG4gICpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYXRvcjxDb250ZXh0PiB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5jb250ZXh0cykge1xuICAgICAgeWllbGQgdGhpcy5jb250ZXh0c1trZXldO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgRWl0aGVyIH0gZnJvbSBcIkAvbW9uYWQvZWl0aGVyXCI7XG5pbXBvcnQgeyBBc3luY1Jlc3VsdCwgT3B0aW9uYWxSZXN1bHQsIFJlc3VsdCB9IGZyb20gXCJAL21vbmFkL3Jlc3VsdFwiO1xuaW1wb3J0IHsgVHJhY2VzIH0gZnJvbSBcIkAvbW9uYWQvdHJhY2UvdHJhY2VzXCI7XG5pbXBvcnQgeyBUcmFjZSB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlXCI7XG5pbXBvcnQgeyBDb250ZXh0cyB9IGZyb20gXCJAL21vbmFkL2NvbnRleHQvY29udGV4dHNcIjtcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHRcIjtcbmltcG9ydCB7IFRyYWNlQ29sbGVjdGlvbiB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlLWNvbGxlY3Rpb25cIjtcbmltcG9ydCB7IFRyYWNlQ29tbW9uIH0gZnJvbSBcIkAvbW9uYWQvdHJhY2UvdHJhY2UtY29tbW9uXCI7XG5pbXBvcnQgeyBDb250ZXh0Q29sbGVjdGlvbiB9IGZyb20gXCJAL21vbmFkL2NvbnRleHQvY29udGV4dC1jb2xsZWN0aW9uXCI7XG5pbXBvcnQgeyBpc1N1Y2Nlc3MgfSBmcm9tIFwiQC9tb25hZC9tb25hZHMvZWl0aGVyL3N1Y2Nlc3NcIjtcblxuY29uc3QgRmFpbHVyZVN5bWJvbCA9IFN5bWJvbChcIkpzTW9uYWRGYWlsdXJlU3ltYm9sXCIpO1xuXG5leHBvcnQgY2xhc3MgRmFpbHVyZSBpbXBsZW1lbnRzIEVpdGhlcjxuZXZlcj4sIEVycm9yIHtcbiAgcHJpdmF0ZSByZWFkb25seSB0cmFjZXM6IFRyYWNlcztcbiAgcHJpdmF0ZSByZWFkb25seSBjb250ZXh0czogQ29udGV4dHM7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY29kZTogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHByZXZpb3VzOiBFcnJvciB8IG51bGw7XG5cbiAgW0ZhaWx1cmVTeW1ib2xdID0gdHJ1ZTtcblxuICBzdGF0aWMgW1N5bWJvbC5oYXNJbnN0YW5jZV0ob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNGYWlsdXJlKG9iaik7XG4gIH1cblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBjb2RlOiBzdHJpbmcsXG4gICAgdHJhY2VzOiBUcmFjZXMsXG4gICAgY29udGV4dHM6IENvbnRleHRzLFxuICAgIHByZXZpb3VzOiBFcnJvciB8IG51bGwsXG4gICkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5uYW1lID0gXCJGYWlsdXJlXCI7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLnRyYWNlcyA9IHRyYWNlcztcbiAgICB0aGlzLmNvbnRleHRzID0gY29udGV4dHM7XG4gICAgdGhpcy5wcmV2aW91cyA9IHByZXZpb3VzO1xuICB9XG5cbiAgc3RhdGljIGR1ZVRvKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBjb2RlOiBzdHJpbmcsXG4gICAgcHJldmlvdXM/OiBFcnJvciB8IG51bGwsXG4gICAgdHJhY2U/OiBUcmFjZSB8IG51bGwsXG4gICAgdHJhY2VzPzogVHJhY2VzIHwgbnVsbCxcbiAgICBjb250ZXh0cz86IENvbnRleHRzIHwgbnVsbCxcbiAgKTogRmFpbHVyZSB7XG4gICAgLy8gQWRkIEZhaWx1cmUgdHJhY2VzIGFzIGxhc3QgaXRlbS5cbiAgICB0cmFjZXMgPSB0cmFjZXMgPz8gVHJhY2VDb2xsZWN0aW9uLmVtcHR5KCk7XG4gICAgaWYgKHRyYWNlKSB7XG4gICAgICB0cmFjZXMuYWRkKHRyYWNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gYSBjb21tb24gdHJhY2Ugb2YgdGhlIG1lc3NhZ2Ugd2hlbiBubyBzcGVjaWZpYyB0cmFjZSB3YXMgcHJvdmlkZWQuXG4gICAgICB0cmFjZXMuYWRkKFRyYWNlQ29tbW9uLmZyb20obWVzc2FnZSwgRGF0ZS5ub3coKSkpO1xuICAgIH1cblxuICAgIGNvbnRleHRzID0gY29udGV4dHMgPz8gQ29udGV4dENvbGxlY3Rpb24uZW1wdHkoKTtcbiAgICByZXR1cm4gbmV3IEZhaWx1cmUoXG4gICAgICBtZXNzYWdlLFxuICAgICAgY29kZSxcbiAgICAgIHRyYWNlcyxcbiAgICAgIGNvbnRleHRzLFxuICAgICAgcHJldmlvdXMgPyBwcmV2aW91cyA6IG51bGwsXG4gICAgKTtcbiAgfVxuXG4gIGJpbmQoZm46ICh2YWx1ZTogbmV2ZXIpID0+IFJlc3VsdDxuZXZlcj4pOiBSZXN1bHQ8bmV2ZXI+IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIG1hcChmbjogKHZhbHVlOiBuZXZlcikgPT4gbmV2ZXIpOiBSZXN1bHQ8bmV2ZXI+IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpZnQodmFsdWU6IG5ldmVyKTogUmVzdWx0PG5ldmVyPiB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB1bndyYXAoKTogbmV2ZXIge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlZhbHVlIG9mIEZhaWx1cmUgY2FuIG5vdCBiZSB1bndyYXBwZWRcIik7XG4gIH1cblxuICBnZXRUcmFjZXMoKTogVHJhY2VzIHtcbiAgICByZXR1cm4gdGhpcy50cmFjZXM7XG4gIH1cblxuICB3aXRoVHJhY2UodHJhY2U6IFRyYWNlKTogUmVzdWx0PG5ldmVyPiB7XG4gICAgdGhpcy50cmFjZXMuYWRkKHRyYWNlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHdpdGhDb250ZXh0KGtleTogc3RyaW5nLCBjb250ZXh0OiBDb250ZXh0KTogUmVzdWx0PG5ldmVyPiB7XG4gICAgdGhpcy5jb250ZXh0cy5hZGQoa2V5LCBjb250ZXh0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldENvbnRleHQoa2V5OiBzdHJpbmcpOiBPcHRpb25hbFJlc3VsdDxDb250ZXh0PiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dHMuZ2V0KGtleSk7XG4gIH1cblxuICBnZXRDb250ZXh0cygpOiBDb250ZXh0cyB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dHM7XG4gIH1cblxuICBjbGVhckNvbnRleHQoa2V5OiBzdHJpbmcpOiBSZXN1bHQ8bmV2ZXI+IHtcbiAgICB0aGlzLmNvbnRleHRzLnJlbW92ZShrZXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ZhaWx1cmU8VD4ob2JqOiBBc3luY1Jlc3VsdDxUPiB8IFJlc3VsdDxUPik6IG9iaiBpcyBGYWlsdXJlIHtcbiAgcmV0dXJuIG9iaiAmJiAob2JqIGFzIEZhaWx1cmUpW0ZhaWx1cmVTeW1ib2xdID09PSB0cnVlO1xufVxuIiwiaW1wb3J0IHsgRWl0aGVyIH0gZnJvbSBcIkAvbW9uYWQvZWl0aGVyXCI7XG5pbXBvcnQgeyBBc3luY1Jlc3VsdCwgT3B0aW9uYWxSZXN1bHQsIFJlc3VsdCB9IGZyb20gXCJAL21vbmFkL3Jlc3VsdFwiO1xuaW1wb3J0IHsgQ29udGV4dHMgfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHRzXCI7XG5pbXBvcnQgeyBUcmFjZXMgfSBmcm9tIFwiQC9tb25hZC90cmFjZS90cmFjZXNcIjtcbmltcG9ydCB7IFRyYWNlIH0gZnJvbSBcIkAvbW9uYWQvdHJhY2UvdHJhY2VcIjtcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tIFwiQC9tb25hZC9jb250ZXh0L2NvbnRleHRcIjtcbmltcG9ydCB7IFRyYWNlQ29sbGVjdGlvbiB9IGZyb20gXCJAL21vbmFkL3RyYWNlL3RyYWNlLWNvbGxlY3Rpb25cIjtcbmltcG9ydCB7IENvbnRleHRDb2xsZWN0aW9uIH0gZnJvbSBcIkAvbW9uYWQvY29udGV4dC9jb250ZXh0LWNvbGxlY3Rpb25cIjtcbmltcG9ydCB7IEZhaWx1cmUgfSBmcm9tIFwiQC9tb25hZC9tb25hZHMvZWl0aGVyL2ZhaWx1cmVcIjtcblxuY29uc3QgU3VjY2Vzc1N5bWJvbCA9IFN5bWJvbChcIkpzTW9uYWRTdWNjZXNzU3ltYm9sXCIpO1xuXG5leHBvcnQgY2xhc3MgU3VjY2VzczxUPiBpbXBsZW1lbnRzIEVpdGhlcjxUPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgdmFsdWU6IFQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgdHJhY2VzOiBUcmFjZXM7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29udGV4dHM6IENvbnRleHRzO1xuICBbU3VjY2Vzc1N5bWJvbF0gPSB0cnVlO1xuXG4gIHN0YXRpYyBbU3ltYm9sLmhhc0luc3RhbmNlXShvYmo6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc1N1Y2Nlc3Mob2JqKTtcbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IodmFsdWU6IFQsIHRyYWNlczogVHJhY2VzLCBjb250ZXh0czogQ29udGV4dHMpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy50cmFjZXMgPSB0cmFjZXM7XG4gICAgdGhpcy5jb250ZXh0cyA9IGNvbnRleHRzO1xuICB9XG5cbiAgc3RhdGljIG9mKHZhbHVlOiBhbnksIHRyYWNlcz86IFRyYWNlcyB8IG51bGwsIGNvbnRleHRzPzogQ29udGV4dHMgfCBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBTdWNjZXNzKFxuICAgICAgdmFsdWUsXG4gICAgICB0cmFjZXMgPz8gVHJhY2VDb2xsZWN0aW9uLmVtcHR5KCksXG4gICAgICBjb250ZXh0cyA/PyBDb250ZXh0Q29sbGVjdGlvbi5lbXB0eSgpLFxuICAgICk7XG4gIH1cblxuICBiaW5kKGZuOiAodmFsdWU6IFQpID0+IFJlc3VsdDxUPik6IFJlc3VsdDxUPiB7XG4gICAgcmV0dXJuIGZuKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgbGlmdCh2YWx1ZTogYW55KTogUmVzdWx0PFQ+IHtcbiAgICByZXR1cm4gbmV3IFN1Y2Nlc3ModmFsdWUsIHRoaXMudHJhY2VzLCB0aGlzLmNvbnRleHRzKTtcbiAgfVxuXG4gIG1hcChmbjogKHZhbHVlOiBhbnkpID0+IGFueSk6IFJlc3VsdDxUPiB7XG4gICAgcmV0dXJuIG5ldyBTdWNjZXNzKGZuKHRoaXMudmFsdWUpLCB0aGlzLnRyYWNlcywgdGhpcy5jb250ZXh0cyk7XG4gIH1cblxuICB1bndyYXAoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICBnZXRUcmFjZXMoKTogVHJhY2VzIHtcbiAgICByZXR1cm4gdGhpcy50cmFjZXM7XG4gIH1cblxuICB3aXRoVHJhY2UodHJhY2U6IFRyYWNlKTogUmVzdWx0PFQ+IHtcbiAgICB0aGlzLnRyYWNlcy5hZGQodHJhY2UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aENvbnRleHQoa2V5OiBzdHJpbmcsIGNvbnRleHQ6IENvbnRleHQpOiBSZXN1bHQ8VD4ge1xuICAgIHRoaXMuY29udGV4dHMuYWRkKGtleSwgY29udGV4dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRDb250ZXh0KGtleTogc3RyaW5nKTogT3B0aW9uYWxSZXN1bHQ8Q29udGV4dD4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzLmdldChrZXkpO1xuICB9XG5cbiAgZ2V0Q29udGV4dHMoKTogQ29udGV4dHMge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRzO1xuICB9XG5cbiAgY2xlYXJDb250ZXh0KGtleTogc3RyaW5nKTogUmVzdWx0PFQ+IHtcbiAgICB0aGlzLmNvbnRleHRzLnJlbW92ZShrZXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N1Y2Nlc3M8VD4oXG4gIG9iajogQXN5bmNSZXN1bHQ8VD4gfCBSZXN1bHQ8VD4sXG4pOiBvYmogaXMgU3VjY2VzczxUPiB7XG4gIHJldHVybiBvYmogJiYgKG9iaiBhcyBTdWNjZXNzPFQ+KVtTdWNjZXNzU3ltYm9sXSA9PT0gdHJ1ZTtcbn1cbiIsIi8vIFN0ZXAgMTogQ3JlYXRlIGEgdW5pcXVlIHN5bWJvbCB0byB0YWcgdGhlIGNsYXNzXG5pbXBvcnQgeyBBc3luY1Jlc3VsdCwgUmVzdWx0IH0gZnJvbSBcIkAvbW9uYWQvcmVzdWx0XCI7XG5pbXBvcnQgeyBTdWNjZXNzIH0gZnJvbSBcIkAvbW9uYWQvbW9uYWRzL2VpdGhlci9zdWNjZXNzXCI7XG5cbmNvbnN0IEF3YWl0aW5nU3ltYm9sID0gU3ltYm9sKFwiSnNNb25hZEF3YWl0aW5nU3ltYm9sXCIpO1xuXG4vLyBTdGVwIDI6IERlZmluZSB0aGUgQXdhaXRpbmcgY2xhc3MgYW5kIHRhZyBpdCB3aXRoIHRoZSBzeW1ib2xcbmV4cG9ydCBpbnRlcmZhY2UgQXdhaXRpbmdJIHt9XG5cbmV4cG9ydCBjbGFzcyBBd2FpdGluZyBpbXBsZW1lbnRzIEF3YWl0aW5nSSB7XG4gIC8vIFRhZ2dpbmcgdGhlIGNsYXNzIHdpdGggdGhlIHN5bWJvbFxuICBbQXdhaXRpbmdTeW1ib2xdID0gdHJ1ZTtcbn1cblxuLy8gUmV0dXJucyAnVHJ1ZScgd2hlbiBvbmUgdmFsdWUgaXMgaW5zdGFuY2Ugb2YgQXdhaXRpbmcuXG5leHBvcnQgZnVuY3Rpb24gaXNBd2FpdGluZzxUPihvYmo6IEFzeW5jUmVzdWx0PFQ+KTogb2JqIGlzIEF3YWl0aW5nIHtcbiAgcmV0dXJuIG9iaiAmJiAob2JqIGFzIEF3YWl0aW5nKVtBd2FpdGluZ1N5bWJvbF0gPT09IHRydWU7XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQXN5bmNSZXN1bHQgfSBmcm9tIFwiQC9tb25hZC9yZXN1bHRcIjtcbmltcG9ydCB7IEF3YWl0aW5nIH0gZnJvbSBcIkAvbW9uYWQvYXdhaXRpbmdcIjtcbmltcG9ydCB7IFN1Y2Nlc3MgfSBmcm9tIFwiQC9tb25hZC9tb25hZHMvZWl0aGVyL3N1Y2Nlc3NcIjtcbmltcG9ydCB7IEZhaWx1cmUgfSBmcm9tIFwiQC9tb25hZC9tb25hZHMvZWl0aGVyL2ZhaWx1cmVcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gXCJmYXN0LWRlZXAtZXF1YWxcIjtcblxudHlwZSBDYWxsYmFja3M8VD4gPSB7XG4gIG9uU3VjY2Vzcz86ICh2YWx1ZTogU3VjY2VzczxUPikgPT4gdm9pZDtcbiAgb25GYWlsdXJlPzogKGVycm9yOiBGYWlsdXJlKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUVmZmVjdEFzeW5jUmVzdWx0PFQ+KFxuICByZXN1bHQ6IEFzeW5jUmVzdWx0PFQ+LFxuICB7IG9uU3VjY2Vzcywgb25GYWlsdXJlIH06IENhbGxiYWNrczxUPixcbik6IHZvaWQge1xuICBjb25zdCBwcmV2aW91c1JlZiA9IHVzZVJlZjxBc3luY1Jlc3VsdDxUPj4obmV3IEF3YWl0aW5nKCkpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcHJldmlvdXMgPSBwcmV2aW91c1JlZi5jdXJyZW50O1xuXG4gICAgY29uc3QgaGFzU3RhdHVzQ2hhbmdlZCA9ICgoKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHByZXZpb3VzIGluc3RhbmNlb2YgQXdhaXRpbmcgJiZcbiAgICAgICAgKHJlc3VsdCBpbnN0YW5jZW9mIFN1Y2Nlc3MgfHwgcmVzdWx0IGluc3RhbmNlb2YgRmFpbHVyZSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2aW91cyBpbnN0YW5jZW9mIFN1Y2Nlc3MgJiYgcmVzdWx0IGluc3RhbmNlb2YgRmFpbHVyZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2aW91cyBpbnN0YW5jZW9mIEZhaWx1cmUgJiYgcmVzdWx0IGluc3RhbmNlb2YgU3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KSgpO1xuXG4gICAgY29uc3QgaGFzVmFsdWVDaGFuZ2VkID1cbiAgICAgIHJlc3VsdCBpbnN0YW5jZW9mIFN1Y2Nlc3MgJiZcbiAgICAgIHByZXZpb3VzIGluc3RhbmNlb2YgU3VjY2VzcyAmJlxuICAgICAgIWlzRXF1YWwocHJldmlvdXMudW53cmFwKCksIHJlc3VsdC51bndyYXAoKSk7XG5cbiAgICBpZiAoaGFzU3RhdHVzQ2hhbmdlZCB8fCBoYXNWYWx1ZUNoYW5nZWQpIHtcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdWNjZXNzICYmIG9uU3VjY2Vzcykge1xuICAgICAgICBvblN1Y2Nlc3MocmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBGYWlsdXJlICYmIG9uRmFpbHVyZSkge1xuICAgICAgICBvbkZhaWx1cmUocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcmV2aW91c1JlZi5jdXJyZW50ID0gcmVzdWx0O1xuICB9LCBbcmVzdWx0LCBvblN1Y2Nlc3MsIG9uRmFpbHVyZV0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VFZmZlY3RBc3luY1Jlc3VsdDtcbiIsImltcG9ydCB7IEFzeW5jUmVzdWx0IH0gZnJvbSBcIkAvbW9uYWQvcmVzdWx0XCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB1c2VFZmZlY3RBc3luY1Jlc3VsdCBmcm9tIFwiQC9tb25hZC9ob29rcy91c2UtZWZmZWN0LWFzeW5jLXJlc3VsdFwiO1xuaW1wb3J0IHsgRmFpbHVyZSB9IGZyb20gXCJAL21vbmFkL21vbmFkcy9laXRoZXIvZmFpbHVyZVwiO1xuaW1wb3J0IHsgU3VjY2VzcyB9IGZyb20gXCJAL21vbmFkL21vbmFkcy9laXRoZXIvc3VjY2Vzc1wiO1xuXG50eXBlIFByb3BzPFQ+ID0ge1xuICBhc3luY1Jlc3VsdDogQXN5bmNSZXN1bHQ8VD47XG4gIG9uQXdhaXRpbmc6ICgpID0+IFJlYWN0LlJlYWN0Tm9kZTtcbiAgb25GYWlsdXJlOiAoZXJyb3I6IEZhaWx1cmUpID0+IFJlYWN0LlJlYWN0Tm9kZTtcbiAgb25TdWNjZXNzOiAoZGF0YTogU3VjY2VzczxUPikgPT4gUmVhY3QuUmVhY3ROb2RlO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIEFzeW5jUmVzdWx0U3VzcGVuc2U8VD4ocHJvcHM6IFByb3BzPFQ+KSB7XG4gIGNvbnN0IHsgYXN5bmNSZXN1bHQsIG9uQXdhaXRpbmcsIG9uRmFpbHVyZSwgb25TdWNjZXNzIH0gPSBwcm9wcztcblxuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZTxTdWNjZXNzPFQ+IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8RmFpbHVyZSB8IGZhbHNlPihmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xuXG4gIHVzZUVmZmVjdEFzeW5jUmVzdWx0PFQ+KGFzeW5jUmVzdWx0LCB7XG4gICAgb25TdWNjZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgc2V0RGF0YShkYXRhKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiAoZXJyb3IpID0+IHtcbiAgICAgIHNldEVycm9yKGVycm9yKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0sXG4gIH0pO1xuXG4gIGlmIChsb2FkaW5nIHx8ICFkYXRhKSB7XG4gICAgcmV0dXJuIDw+e29uQXdhaXRpbmcoKX08Lz47XG4gIH1cblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gPD57b25GYWlsdXJlKGVycm9yKX08Lz47XG4gIH1cblxuICBpZiAoZGF0YSkge1xuICAgIHJldHVybiA8PntvblN1Y2Nlc3MoZGF0YSl9PC8+O1xuICB9XG59XG4iXX0=